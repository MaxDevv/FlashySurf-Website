import"../chunks/DsnmJJEf.js";import{d as St,o as wt,s as ve,e as de}from"../chunks/D5M7I4Ne.js";import{a7 as rt,g as It,au as At,h as F,i as Ct,d as Dt,Y as r,av as Et,r as kt,H as Tt,j as We,s as Xe,k as Ce,v as ne,C as Ot,ad as Nt,m as Ne,p as Mt,o as Z,ah as st,l as qt,aw as Ut,ax as Ke,ay as Lt,t as lt,u as Ft,az as Rt,aA as De,M as nt,aB as $t,aC as Ht,D as Jt,aD as Bt,ag as Pt,aE as Gt,a9 as Vt,aF as Yt,at as zt,y as jt,x as Qt,aG as Wt,$ as Xt,aH as L,aI as Kt,aJ as x,O as Zt,P as Ze,c as $,a0 as ea,f as P,a3 as h,a1 as y,a2 as S,aK as et,Q as Ee,aL as ta}from"../chunks/Dl8K67rZ.js";import{i as W,b as aa}from"../chunks/tqDBf2He.js";import{r as X,a as ra,s as sa,b as la}from"../chunks/DWWmCLpR.js";const na=[];function ia(e,a=!1,t=!1){return he(e,new Map,"",na,null,t)}function he(e,a,t,l,o=null,s=!1){if(typeof e=="object"&&e!==null){var v=a.get(e);if(v!==void 0)return v;if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if(rt(e)){var c=Array(e.length);a.set(e,c),o!==null&&a.set(o,c);for(var p=0;p<e.length;p+=1){var b=e[p];p in e&&(c[p]=he(b,a,t,l,null,s))}return c}if(It(e)===At){c={},a.set(e,c),o!==null&&a.set(o,c);for(var g in e)c[g]=he(e[g],a,t,l,null,s);return c}if(e instanceof Date)return structuredClone(e);if(typeof e.toJSON=="function"&&!s)return he(e.toJSON(),a,t,l,e)}if(e instanceof EventTarget)return e;try{return structuredClone(e)}catch{return e}}function tt(e,a){return a}function oa(e,a,t){for(var l=e.items,o=[],s=a.length,v=0;v<s;v++)Bt(a[v].e,o,!0);var c=s>0&&o.length===0&&t!==null;if(c){var p=t.parentNode;Pt(p),p.append(t),l.clear(),H(e,a[0].prev,a[s-1].next)}Gt(o,()=>{for(var b=0;b<s;b++){var g=a[b];c||(l.delete(g.k),H(e,g.prev,g.next)),nt(g.e,!c)}})}function at(e,a,t,l,o,s=null){var v=e,c={flags:a,items:new Map,first:null};F&&Ct();var p=null,b=!1,g=new Map,O=Et(()=>{var f=t();return rt(f)?f:f==null?[]:st(f)}),n,A;function d(){ca(A,n,c,g,v,o,a,l,t),s!==null&&(n.length===0?p?lt(p):p=Ne(()=>s(v)):p!==null&&Ft(p,()=>{p=null}))}Dt(()=>{A??=Vt,n=r(O);var f=n.length;if(b&&f===0)return;b=f===0;let E=!1;if(F){var G=kt(v)===Tt;G!==(f===0)&&(v=We(),Xe(v),Ce(!1),E=!0)}if(F){for(var N=null,_,m=0;m<f;m++){if(ne.nodeType===Ot&&ne.data===Nt){v=ne,E=!0,Ce(!1);break}var k=n[m],M=l(k,m);_=Me(ne,c,N,null,k,M,m,o,a,t),c.items.set(M,_),N=_}f>0&&Xe(We())}if(F)f===0&&s&&(p=Ne(()=>s(v)));else if(Mt()){var R=new Set,q=Z;for(m=0;m<f;m+=1){k=n[m],M=l(k,m);var D=c.items.get(M)??g.get(M);D?it(D,k,m):(_=Me(null,c,null,null,k,M,m,o,a,t,!0),g.set(M,_)),R.add(M)}for(const[z,j]of c.items)R.has(z)||q.skipped_effects.add(j.e);q.add_callback(d)}else d();E&&Ce(!0),r(O)}),F&&(v=ne)}function ca(e,a,t,l,o,s,v,c,p){var b=a.length,g=t.items,O=t.first,n=O,A,d=null,f=[],E=[],G,N,_,m;for(m=0;m<b;m+=1){if(G=a[m],N=c(G,m),_=g.get(N),_===void 0){var k=l.get(N);if(k!==void 0){l.delete(N),g.set(N,k);var M=d?d.next:n;H(t,d,k),H(t,k,M),ke(k,M,o),d=k}else{var R=n?n.e.nodes_start:o;d=Me(R,t,d,d===null?t.first:d.next,G,N,m,s,v,p)}g.set(N,d),f=[],E=[],n=d.next;continue}if(it(_,G,m),(_.e.f&De)!==0&&lt(_.e),_!==n){if(A!==void 0&&A.has(_)){if(f.length<E.length){var q=E[0],D;d=q.prev;var z=f[0],j=f[f.length-1];for(D=0;D<f.length;D+=1)ke(f[D],q,o);for(D=0;D<E.length;D+=1)A.delete(E[D]);H(t,z.prev,j.next),H(t,d,z),H(t,j,q),n=q,d=j,m-=1,f=[],E=[]}else A.delete(_),ke(_,n,o),H(t,_.prev,_.next),H(t,_,d===null?t.first:d.next),H(t,d,_),d=_;continue}for(f=[],E=[];n!==null&&n.k!==N;)(n.e.f&De)===0&&(A??=new Set).add(n),E.push(n),n=n.next;if(n===null)continue;_=n}f.push(_),d=_,n=_.next}if(n!==null||A!==void 0){for(var ee=A===void 0?[]:st(A);n!==null;)(n.e.f&De)===0&&ee.push(n),n=n.next;var pe=ee.length;if(pe>0){var i=null;oa(t,ee,i)}}e.first=t.first&&t.first.e,e.last=d&&d.e;for(var u of l.values())nt(u.e);l.clear()}function it(e,a,t,l){Lt(e.v,a),e.i=t}function Me(e,a,t,l,o,s,v,c,p,b,g){var O=(p&$t)!==0,n=(p&Ht)===0,A=O?n?Ut(o,!1,!1):Ke(o):o,d=(p&Rt)===0?v:Ke(v),f={i:d,v:A,k:s,a:null,e:null,prev:t,next:l};try{if(e===null){var E=document.createDocumentFragment();E.append(e=qt())}return f.e=Ne(()=>c(e,A,d,b),F),f.e.prev=t&&t.e,f.e.next=l&&l.e,t===null?g||(a.first=f):(t.next=f,t.e.next=f.e),l!==null&&(l.prev=f,l.e.prev=f.e),f}finally{}}function ke(e,a,t){for(var l=e.next?e.next.e.nodes_start:t,o=a?a.e.nodes_start:t,s=e.e.nodes_start;s!==null&&s!==l;){var v=Jt(s);o.before(s),s=v}}function H(e,a,t){a===null?e.first=t:(a.next=t,a.e.next=t&&t.e),t!==null&&(t.prev=a,t.e.prev=a&&a.e)}function fa(e,a,t){var l=e==null?"":""+e;return l=l?l+" "+a:a,l===""?null:l}function va(e,a){return e==null?null:String(e)}function da(e,a,t,l,o,s){var v=e.__className;if(F||v!==t||v===void 0){var c=fa(t,l);(!F||c!==e.getAttribute("class"))&&(c==null?e.removeAttribute("class"):e.className=c),e.__className=t}return s}function ue(e,a,t,l){var o=e.__style;if(F||o!==a){var s=va(a);(!F||s!==e.getAttribute("style"))&&(s==null?e.removeAttribute("style"):e.style.cssText=s),e.__style=a}return l}function K(e,a,t=a){var l=new WeakSet;Yt(e,"input",async o=>{var s=o?e.defaultValue:e.value;if(s=Te(e)?Oe(s):s,t(s),Z!==null&&l.add(Z),await zt(),s!==(s=a())){var v=e.selectionStart,c=e.selectionEnd;e.value=s??"",c!==null&&(e.selectionStart=v,e.selectionEnd=Math.min(c,e.value.length))}}),(F&&e.defaultValue!==e.value||jt(a)==null&&e.value)&&(t(Te(e)?Oe(e.value):e.value),Z!==null&&l.add(Z)),Qt(()=>{var o=a();if(e===document.activeElement){var s=Wt??Z;if(l.has(s))return}Te(e)&&o===Oe(e.value)||e.type==="date"&&!o&&!e.value||o!==e.value&&(e.value=o??"")})}function Te(e){var a=e.type;return a==="number"||a==="range"}function Oe(e){return e===""?null:+e}function ua(e,a,t){r(a).push(t)}function ha(e,a,t){r(a).files.length>0&&t(r(a).files[0])}var pa=(e,a)=>{x(a,!0),localStorage.setItem("tosAgreed",!0)},_a=P(`<div class="tos svelte-1hfx38l"><h4 class="svelte-1hfx38l">Terms of Service Agreement</h4> <div class="svelte-1hfx38l">Please read and accept our <a target="_blank" rel="noopener noreferrer" href="/tos" class="svelte-1hfx38l">Terms of Service</a> before continuing.
			By clicking “I Agree”, you confirm that you have read, understood, and agree to be bound by our Terms of Service.</div> <button class="svelte-1hfx38l">I Agree</button></div>`),ga=P('<button class="removeOption svelte-1hfx38l">-</button>'),ma=P('<span class="svelte-1hfx38l">Correct?</span><input type="radio" class="svelte-1hfx38l"/>',1),xa=P('<div class="choice svelte-1hfx38l"><!> <label class="svelte-1hfx38l"></label> <input type="text" placeholder="A possible answer choice." class="svelte-1hfx38l"/> <!></div>'),ba=(e,a)=>{r(a).choices.push("")},ya=P('<button class="svelte-1hfx38l">Add Option</button>'),Sa=P('<div class="flashcard svelte-1hfx38l"><div class="flashcard-header svelte-1hfx38l"><h4 class="svelte-1hfx38l"></h4> <button class="svelte-1hfx38l">Delete Card</button></div> <div class="row svelte-1hfx38l"><label class="svelte-1hfx38l">Question:</label> <input type="text" placeholder="The multiple-choice question text." class="svelte-1hfx38l"/></div> <div class="row svelte-1hfx38l"><label class="svelte-1hfx38l">Paragraph:</label> <input type="text" placeholder="Optional supporting paragraph or context. Usually used for large questions." class="svelte-1hfx38l"/></div> <div class="choices svelte-1hfx38l"><!> <!></div> <div class="row svelte-1hfx38l"><label class="svelte-1hfx38l">Explanation:</label> <input type="text" placeholder="Explanation for why the answer is correct, and why other choices are wrong. Optional but highly reccomended." class="svelte-1hfx38l"/></div></div>'),wa=(e,a)=>r(a)&&r(a).click(),Ia=P('<div class="loader svelte-1hfx38l"></div>'),Aa=P('<span class="generating svelte-1hfx38l">Generating Please Wait...</span>'),Ca=P(`<div class="mainContainer svelte-1hfx38l"><div class="main svelte-1hfx38l"><div class="name svelte-1hfx38l"><label for="name" class="svelte-1hfx38l">Collection Name:</label> <input id="name" type="text" maxlength="30" placeholder="A short but descriptive flashcard name. Max 30 letters." class="svelte-1hfx38l"/></div> <!> <button class="add-card svelte-1hfx38l"><span class="plus svelte-1hfx38l">+</span> Add Card</button> <button class="download svelte-1hfx38l"><span class="arrow svelte-1hfx38l">↓</span> Download</button> <span class="svelte-1hfx38l">* All required fields (e.g., Collection Name, and for each card: a question, two options, and
				a chosen correct answer) must be filled!</span></div> <div class="sidebar svelte-1hfx38l"><div class="uploader svelte-1hfx38l"><div><div class="plus svelte-1hfx38l">+</div> <div class="caption svelte-1hfx38l">Upload flashcard collection to edit ↑</div> <div class="hint svelte-1hfx38l">Drag & drop or click to upload</div> <input class="file-input svelte-1hfx38l" type="file" multiple/></div></div> <div class="ai-maker svelte-1hfx38l"><h3 class="svelte-1hfx38l">AI Flashcard Maker / Importer</h3> <div class="ai-area svelte-1hfx38l"><h4 class="svelte-1hfx38l">Source Documents/Details:</h4> <textarea placeholder="Input any text that you wish to be converted into flashcards. This can be study guides, documents, e.t.c and any instructions, or specific topics you wish to focus on." class="svelte-1hfx38l"></textarea> <h4 class="svelte-1hfx38l">Additional Details (Optional But HIGHLY Reccommended):</h4> <textarea style="
			min-height: 10.5em;" placeholder="A brief but specific message, describing what you would like the flashcards to be about for example: I got this from a website, can you make flashcards on all the hiragana kana/symbols listed so I can pass my japanese test." maxlength="25000" class="svelte-1hfx38l"></textarea> <div class="ai-footer svelte-1hfx38l"><div class="counter svelte-1hfx38l"> </div> <div class="counter svelte-1hfx38l"> </div> <button class="generate svelte-1hfx38l"> <!></button></div> <!> <span class="errorMsg svelte-1hfx38l"> </span></div></div></div></div>`);function Na(e,a){Xt(a,!0);let t=L("");const l={question:"",paragraph:"",choices:["",""],explanation:"",answer:""};let o=L(!0),s=L(Kt([l])),v=L(!1),c=crypto.randomUUID(),p=10,b=L(0),g=L(""),O=L(""),n=L(!1),A=L(!1),d=L(void 0);function f(){for(const i of r(s)){if(i.question==""||i.answer=="")return!1;for(const u of i.choices)if(u=="")return!1}return r(t)!=""}setInterval(()=>{x(v,f(),!0)},250);function E(i){i.preventDefault(),x(A,!0)}function G(){x(A,!1)}function N(i){i.preventDefault(),x(A,!1);const u=i.dataTransfer.files;u.length>0&&_(u[0])}function _(i){if(!i)return;const u=new FileReader;u.onload=function(w){try{k(JSON.parse(w.target.result))}catch(T){console.log("Error parsing JSON: "+T.message)}},u.readAsText(i)}function m(){let i={questions:[],id:c,name:r(t)};for(let w of r(s)){let T={question:w.question,paragraph:w.paragraph,explanation:w.explanation,answer:w.answer,choices:[]};for(let J=0;J<w.choices.length;J++)T.choices.push("ABCD"[J]+") "+w.choices[J]);T.id=T.id?T.id:crypto.randomUUID(),i.questions.push(T)}function u(w,T){var J="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(w)),V=document.createElement("a");V.setAttribute("href",J),V.setAttribute("download",T+".json"),document.body.appendChild(V),V.click(),V.remove()}u(i,"flashsurf-collection- ("+i.name+") - ("+i.id+") - ( "+crypto.randomUUID().slice(0,8)+" ).flashysurfcollection")}function k(i){console.log(i),!(!i||typeof i!="object")&&(r(s).length==[l].length&&JSON.stringify(ia(r(s))[0])==JSON.stringify(l)&&x(s,[],!0),x(t,i.name??r(t),!0),c=i.id??c,r(s).push(...(i.questions??[]).map(u=>{const w=T=>T.replace(/^.[\)]\s*/,"");return{question:u.question??"",paragraph:u.paragraph??"",explanation:u.explanation??"",answer:u.answer??"",choices:(u.choices??[]).map(w)}})))}wt(()=>{x(o,localStorage.getItem("tosAgreed")=="true"),localStorage.getItem("aiCollectionsLastUpdate")!=new Date().toISOString().substring(0,10)&&(localStorage.setItem("aiCollectionsLastUpdate",new Date().toISOString().substring(0,10)),localStorage.setItem("aiCollections","0")),setInterval(()=>{localStorage.getItem("aiCollectionsLastUpdate")!=new Date().toISOString().substring(0,10)&&(localStorage.setItem("aiCollectionsLastUpdate",new Date().toISOString().substring(0,10)),localStorage.setItem("aiCollections","0"))},1e3),localStorage.getItem("aiCollections")||localStorage.setItem("aiCollections","0"),x(b,parseInt(localStorage.getItem("aiCollections")),!0)});async function M(){x(n,!0),x(O,"");let i;try{if(i=await fetch("https://flashysurf-creator-ai-api-1085676987010.europe-west1.run.app",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:(r(g)?`Attention, the user has provided additional details on thier flashcard request, please take this into consideration: "${r(g)}"


`:"")+r(q)})}),!i.ok)throw setTimeout(()=>{x(n,!1)},1e3),x(O,"Server Error, sorry please try again later..."),new Error(`API request failed: ${i.status} ${i.statusText}`)}catch(w){setTimeout(()=>{x(n,!1),x(O,"Server Error, sorry please try again later...")},1e3),console.log("Error",w);return}x(b,r(b)+1),localStorage.setItem("aiCollections",r(b)+""),localStorage.setItem("aiCollectionsLastUpdate",new Date().toISOString().substring(0,10));const u=await i.json();console.log(i,u),u.userError?(console.log(u.userError),x(O,u.userError,!0)):k(u),x(n,!1)}const R=175e3;let q=L(""),D=ta(()=>r(q).length+r(g).length);var z=Zt(),j=Ze(z);{var ee=i=>{var u=_a(),w=h(y(u),4);w.__click=[pa,o],S(u),$(i,u)},pe=i=>{var u=Ca(),w=y(u),T=y(w),J=h(y(T),2);X(J),S(T);var V=h(T,2);at(V,17,()=>r(s),tt,(C,I,ae)=>{var re=Sa(),ye=y(re),Be=y(ye);Be.textContent=`Card ${ae+1}`;var pt=h(Be,2);pt.__click=()=>{r(s).splice(ae,1)},S(ye);var Se=h(ye,2),Pe=h(y(Se),2);X(Pe),S(Se);var we=h(Se,2),Ge=h(y(we),2);X(Ge),S(we);var Ie=h(we,2),Ve=y(Ie);at(Ve,17,()=>r(I).choices,tt,(U,se,Q)=>{var Ae=xa(),je=y(Ae);{var mt=B=>{var le=ga();le.__click=()=>{r(I).choices.splice(Q,1)},$(B,le)};W(je,B=>{Q>1&&B(mt)})}var Qe=h(je,2);Qe.textContent=`Option ${"ABCD"[Q]??""}:`;var ce=h(Qe,2);X(ce),ce.__input=B=>r(I).choices[Q]=B.currentTarget.value;var xt=h(ce,2);{var bt=B=>{var le=ma(),fe=h(Ze(le));X(fe),sa(fe,"name","Flashcard #"+ae),fe.__change=yt=>{yt.target.checked&&(r(I).answer=`${"ABCD"[Q]}) ${r(I).choices[Q]}`)},Ee(()=>la(fe,r(I).answer[0]=="ABCD"[Q])),$(B,le)};W(xt,B=>{r(se)!=""&&B(bt)})}S(Ae),Ee(()=>ra(ce,r(se))),$(U,Ae)});var _t=h(Ve,2);{var gt=U=>{var se=ya();se.__click=[ba,I],$(U,se)};W(_t,U=>{r(I).choices.length<4&&U(gt)})}S(Ie);var Ye=h(Ie,2),ze=h(y(Ye),2);X(ze),S(Ye),S(re),K(Pe,()=>r(I).question,U=>r(I).question=U),K(Ge,()=>r(I).paragraph,U=>r(I).paragraph=U),K(ze,()=>r(I).explanation,U=>r(I).explanation=U),$(C,re)});var qe=h(V,2);qe.__click=[ua,s,l];var _e=h(qe,2);_e.__click=m;var ot=h(_e,2);S(w);var Ue=h(w,2),ge=y(Ue),Y=y(ge);Y.__click=[wa,d];var Le=h(y(Y),6);Le.__change=[ha,d,_],aa(Le,C=>x(d,C),()=>r(d)),S(Y),S(ge);var Fe=h(ge,2),Re=h(y(Fe),2),me=h(y(Re),2);et(me);var xe=h(me,4);et(xe);var be=h(xe,2),ie=y(be),ct=y(ie);S(ie);var oe=h(ie,2),ft=y(oe);S(oe);var te=h(oe,2);te.__click=M;var $e=y(te),vt=h($e);{var dt=C=>{var I=Ia();$(C,I)};W(vt,C=>{r(n)&&C(dt)})}S(te),S(be);var He=h(be,2);{var ut=C=>{var I=Aa();$(C,I)};W(He,C=>{r(n)&&C(ut)})}var Je=h(He,2),ht=y(Je,!0);S(Je),S(Re),S(Fe),S(Ue),S(u),Ee((C,I,ae,re)=>{_e.disabled=!r(v),ue(ot,`color: red; font-size: 0.8rem; margin-top: -5em; margin-bottom: 5em; ${r(v)?"display: none;":""} padding-left: 1.5em;`),da(Y,1,`dropzone ${r(A)?"dragging":""}`,"svelte-1hfx38l"),ue(ie,r(D)>R?"color: red":r(D)>R*.5?"color: GoldenRod":""),ve(ct,`${C??""}/${I??""} chars`),ue(oe,r(b)>=p?"color: red":r(b)>p*.5?"color: GoldenRod":""),ve(ft,`AI Collections Created Today: ${ae??""} / ${re??""}`),te.disabled=r(D)>R||r(b)>=p||r(D)<1||r(n),ue(te,r(D)>R?"cursor: default;":""),ve($e,`Generat${r(n)?"ing":"e"} `),ve(ht,r(O))},[()=>r(D).toLocaleString(),()=>R.toLocaleString(),()=>r(b).toLocaleString(),()=>p.toLocaleString()]),K(J,()=>r(t),C=>x(t,C)),de("dragover",Y,E),de("dragenter",Y,E),de("dragleave",Y,G),de("drop",Y,N),K(me,()=>r(q),C=>x(q,C)),K(xe,()=>r(g),C=>x(g,C)),$(i,u)};W(j,i=>{r(o)?i(pe,!1):i(ee)})}$(e,z),ea()}St(["click","input","change"]);export{Na as component};
